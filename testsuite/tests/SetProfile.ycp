{
    // testedfiles: ProfileManager.ycp
    import "Testsuite";
    import "ProfileManager";


    map WRITE_true =
    $[ "scpm":
		$[ "profiles":
            $[ "prestart": true,
               "poststart": true,
               "prestop": true,
               "poststop": true,
               "description": true
            ]
        ]
	];

    map WRITE_false =
    $[ "scpm":
		$[ "profiles":
            $[ "prestart": true,
               "poststart": false,
               "prestop": true,
               "poststop": true,
               "description": true
            ]
        ]
	];

    map READ =
    $[ "scpm": $[ "error": "error while writing profile settings"]];

    ProfileManager::profiles =
    $[ "default" : "default description",
       "home" : "My private configuration",
    ];

    map profile_settings =
    $[ "name": "default",
       "description": "New description for default profile",
       "prestart": "/tmp/default/p1",
       "posttart": "",
       "prestop": "",
       "poststop": "/var/scpm/default/ps"
    ];

    Testsuite::Dump(ProfileManager::profiles);

    Testsuite::Test(``(ProfileManager::SetProfile("default", profile_settings)),
	[ READ, WRITE_false, $[] ], nil);

    Testsuite::Dump(ProfileManager::profiles);

    Testsuite::Test(``(ProfileManager::SetProfile("default", profile_settings)),
	[ READ, WRITE_true, $[] ], nil);

    Testsuite::Dump(ProfileManager::profiles);
}
