<html>
<head>
<title>SCPM YaST specification</title>
</head>
<body>
<h2 align=center>Switch Dialog</h2>
<p>
The switch dialog is entered by clicking <b>Switch ...</b> or
<b>Reload</b> in the main dialog.
</p>
<table border frame=box><tr>
<td valign=top>
<h4>approved helptext</h4>

<p>When you leave a profile, there might be changes in resources covered by
SCPM.  You have to decide what to do with these changes. <b>Save</b> them to the
profile or <b>Drop</b> them.</p>

<p>The <b>flags</b> DELETED or NEW show that a resource will be deleted or added
to the profile. This only happens if you changed the resource set in the SCPM
options or if packages have been installed or removed from the system.</p>

<p>The resource <b>type</b> <i>file</i> explains itself. The resource type
<i>service</i> means that there are changes in the runlevel links of this
service, which decide if a service has to be started in a runlevel.</p>

<p>If you are unsure what was changed in a resource, select it and use <b>Show
changes</b>. This will show you the changes in the selected resource.</b>

</td>
<td valign=top>
<img src="images/dialog_switch.png">
</td></tr></table>
<h3 align=left>General information</h3>
<p>
This dialog handles the hole switch to another profile. That means,
the switch has to be prepared here, possibly modified, new, or
obsolete resource has to be presented to the user, and afterwards the
switch itself has to be performed based on the user decision what to
do with that resources.</p>

<h3 align=left>Getting information</h3>
<p>
To gather the needed inforation about the modified resources, the
switch has do be prepared. For that purpose,
directly after entering this dialog <code><a href="/usr/share/doc/packages/scpm/api/html/classSCPM.html#a12">
SPCM:PrepareSwitch</a></code> gets called. You need to create a struct
of <code><a href="/usr/share/doc/packages/scpm/api/html/structswitch__info__t.html">switch_info_t</a></code>
type first. Performing this command usually writes some information on
the first stream object you passed when creating the SCPM object, see 
<a href="/usr/share/doc/packages/scpm/api/html/classSCPM.html#a0">constructor documentation</a>. Those
informations get presented to the user by a special popup, see
<a href="popup_progress.html">progress popup documentation</a>.
After the switch was prepared, you have your <code>
<a href="/usr/share/doc/packages/scpm/api/html/structswitch__info__t.html">switch_info_t</a></code>
struct filled with data. For every item in the <code>
<a href="/usr/share/doc/packages/scpm/api/html/structswitch__info__t.html#m2">modified_resources
vector</a></code> of the struct, one entry in the table list Modified
Resources gets generated. The flags <b>Save</b>, <b>New</b>, and
<b>Deleted</b> are saved in the respective flags
<code>switch_info_t::save</code>, <code>switch_info_t::is_new</code>,
and <code>switch_info_t::is_deleted</code> of the struct. The
<code>switch_info_t::save</code> element should be modified to match
the users selection.

<h3 align=left>Actions to perform</h3>
<ul>
<li><b>Modified Resources</b></li>
Clicking a resource line in the list box should toggle the
<code>Save</code> flag of this resource.
<li><b>save all</b></li>
Sets the <code>Save</code> flags of all resources to <var>true</var>.
<li><b>drop all</b></li>
Sets the <code>Save</code> flags of all resources to <var>false</var>.
<li><b>show changes</b></li>
Call <code><a href="/usr/share/doc/packages/scpm/api/html/classSCPM.html#a19">SCPM::ShowChanges</a></code> 
with the selected resource as an
argument and show the changes in a pop-up with a single RTF field and a close
button.
<li><b>Back</b></li>
This takes the user back to the <a href="dialog_main.html">main
dialog</a>. The <code>switch_info_t</code> struct can be dropped.
<li><b>Ok</b></li>
Calls <code><a href="/usr/share/doc/packages/scpm/api/html/classSCPM.html#a13">SCPM::Switch</a></code>
with the possibly modified <code>switch_info_t</code> struct. The
<a href="popup_progress.html">progress popup</a> is needed here again.
</ul>

<p>Please first launch this dialog, then raise the progress popup. After
PrepareSwitch has finished fill the table.
When leaving the dialog, first show the progress popup the second time before
really leaving. The progress popup should always raise from this dialog.</p> 

</body>
</html>
